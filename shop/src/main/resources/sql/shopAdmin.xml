<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="shopAdmin">

	<!-- 등록 -->
	<insert id="shopInsert">
		insert into product_tbl values((SELECT NVL(MAX(PD_NO),0)+1 FROM
		PRODUCT_TBL),
		#{PD_NAME},#{PD_CATEGORY_NO},#{PD_SUB_CATEGORY_NO},#{PD_PRICE},#{PD_IMG},#{PD_QUANTITY},#{PD_INFO},0,sysdate)
	</insert>

	<!-- 카테고리 1,2차 에이잭스-->
	<select id="cate" resultType="shop" parameterType="int">
		<choose>
			<when test="value gt 1">
				select * from sub_category_tbl where SC_NO_REF=#{cate}
			</when>
			<otherwise>
				select * from CATEGORY_TBL
			</otherwise>
		</choose>
	</select>

	<!-- 조회 -->
	<select id="shopList" resultType="shop">
		select * from product_tbl
	</select>
	
	<!-- 리스트 선택시 -->
	<select id="catesel" resultType="shop" parameterType="java.util.HashMap">
	select * from PRODUCT_TBL where PD_CATEGORY_NO IN
	<foreach collection="tall" item="tall" index="index"  open="(" close=")" separator=",">
             #{tall}
     </foreach>
     
     <if test="small != null">
     AND PD_SUB_CATEGORY_NO IN  
     <foreach collection="small" item="small" index="index"  open="(" close=")" separator=",">
             #{small}
     </foreach>
	</if>
     
	</select>




</mapper>